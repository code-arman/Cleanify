{"ast":null,"code":"'use strict';\n\nvar Request = function (builder) {\n  if (!builder) {\n    throw new Error('No builder supplied to constructor');\n  }\n\n  this.host = builder.host;\n  this.port = builder.port;\n  this.scheme = builder.scheme;\n  this.queryParameters = builder.queryParameters;\n  this.bodyParameters = builder.bodyParameters;\n  this.headers = builder.headers;\n  this.path = builder.path;\n};\n\nRequest.prototype._getter = function (key) {\n  return function () {\n    return this[key];\n  };\n};\n\nRequest.prototype.getHost = Request.prototype._getter('host');\nRequest.prototype.getPort = Request.prototype._getter('port');\nRequest.prototype.getScheme = Request.prototype._getter('scheme');\nRequest.prototype.getPath = Request.prototype._getter('path');\nRequest.prototype.getQueryParameters = Request.prototype._getter('queryParameters');\nRequest.prototype.getBodyParameters = Request.prototype._getter('bodyParameters');\nRequest.prototype.getHeaders = Request.prototype._getter('headers');\n\nRequest.prototype.getURI = function () {\n  if (!this.scheme || !this.host || !this.port) {\n    throw new Error('Missing components necessary to construct URI');\n  }\n\n  var uri = this.scheme + '://' + this.host;\n\n  if (this.scheme === 'http' && this.port !== 80 || this.scheme === 'https' && this.port !== 443) {\n    uri += ':' + this.port;\n  }\n\n  if (this.path) {\n    uri += this.path;\n  }\n\n  return uri;\n};\n\nRequest.prototype.getURL = function () {\n  var uri = this.getURI();\n\n  if (this.getQueryParameters()) {\n    return uri + this.getQueryParameterString(this.getQueryParameters());\n  } else {\n    return uri;\n  }\n};\n\nRequest.prototype.getQueryParameterString = function () {\n  var queryParameters = this.getQueryParameters();\n\n  if (queryParameters) {\n    return '?' + Object.keys(queryParameters).filter(function (key) {\n      return queryParameters[key] !== undefined;\n    }).map(function (key) {\n      return key + '=' + queryParameters[key];\n    }).join('&');\n  }\n};\n\nRequest.prototype.execute = function (method, callback) {\n  if (callback) {\n    method(this, callback);\n    return;\n  }\n\n  var _self = this;\n\n  return new Promise(function (resolve, reject) {\n    method(_self, function (error, result) {\n      if (error) {\n        reject(error);\n      } else {\n        resolve(result);\n      }\n    });\n  });\n};\n\nvar Builder = function () {};\n\nBuilder.prototype._setter = function (key) {\n  return function (value) {\n    this[key] = value;\n    return this;\n  };\n};\n\nBuilder.prototype.withHost = Builder.prototype._setter('host');\nBuilder.prototype.withPort = Builder.prototype._setter('port');\nBuilder.prototype.withScheme = Builder.prototype._setter('scheme');\nBuilder.prototype.withPath = Builder.prototype._setter('path');\n\nBuilder.prototype._assigner = function (key) {\n  return function () {\n    for (var i = 0; i < arguments.length; i++) {\n      this[key] = this._assign(this[key], arguments[i]);\n    }\n\n    return this;\n  };\n};\n\nBuilder.prototype.withQueryParameters = Builder.prototype._assigner('queryParameters');\nBuilder.prototype.withBodyParameters = Builder.prototype._assigner('bodyParameters');\nBuilder.prototype.withHeaders = Builder.prototype._assigner('headers');\n\nBuilder.prototype.withAuth = function (accessToken) {\n  if (accessToken) {\n    this.withHeaders({\n      Authorization: 'Bearer ' + accessToken\n    });\n  }\n\n  return this;\n};\n\nBuilder.prototype._assign = function (src, obj) {\n  if (obj && Array.isArray(obj)) {\n    return obj;\n  }\n\n  if (obj && typeof obj === 'string') {\n    return obj;\n  }\n\n  if (obj && Object.keys(obj).length > 0) {\n    return Object.assign(src || {}, obj);\n  }\n\n  return src;\n};\n\nBuilder.prototype.build = function () {\n  return new Request(this);\n};\n\nmodule.exports.builder = function () {\n  return new Builder();\n};","map":{"version":3,"sources":["/Users/armanrafati/Documents/Cleanify/client/node_modules/spotify-web-api-node/src/base-request.js"],"names":["Request","builder","Error","host","port","scheme","queryParameters","bodyParameters","headers","path","prototype","_getter","key","getHost","getPort","getScheme","getPath","getQueryParameters","getBodyParameters","getHeaders","getURI","uri","getURL","getQueryParameterString","Object","keys","filter","undefined","map","join","execute","method","callback","_self","Promise","resolve","reject","error","result","Builder","_setter","value","withHost","withPort","withScheme","withPath","_assigner","i","arguments","length","_assign","withQueryParameters","withBodyParameters","withHeaders","withAuth","accessToken","Authorization","src","obj","Array","isArray","assign","build","module","exports"],"mappings":"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","sourcesContent":["'use strict';\n\nvar Request = function(builder) {\n  if (!builder) {\n    throw new Error('No builder supplied to constructor');\n  }\n\n  this.host = builder.host;\n  this.port = builder.port;\n  this.scheme = builder.scheme;\n  this.queryParameters = builder.queryParameters;\n  this.bodyParameters = builder.bodyParameters;\n  this.headers = builder.headers;\n  this.path = builder.path;\n};\n\nRequest.prototype._getter = function(key) {\n  return function() {\n    return this[key];\n  };\n};\n\nRequest.prototype.getHost = Request.prototype._getter('host');\n\nRequest.prototype.getPort = Request.prototype._getter('port');\n\nRequest.prototype.getScheme = Request.prototype._getter('scheme');\n\nRequest.prototype.getPath = Request.prototype._getter('path');\n\nRequest.prototype.getQueryParameters = Request.prototype._getter(\n  'queryParameters'\n);\n\nRequest.prototype.getBodyParameters = Request.prototype._getter(\n  'bodyParameters'\n);\n\nRequest.prototype.getHeaders = Request.prototype._getter('headers');\n\nRequest.prototype.getURI = function() {\n  if (!this.scheme || !this.host || !this.port) {\n    throw new Error('Missing components necessary to construct URI');\n  }\n  var uri = this.scheme + '://' + this.host;\n  if (\n    (this.scheme === 'http' && this.port !== 80) ||\n    (this.scheme === 'https' && this.port !== 443)\n  ) {\n    uri += ':' + this.port;\n  }\n  if (this.path) {\n    uri += this.path;\n  }\n  return uri;\n};\n\nRequest.prototype.getURL = function() {\n  var uri = this.getURI();\n  if (this.getQueryParameters()) {\n    return uri + this.getQueryParameterString(this.getQueryParameters());\n  } else {\n    return uri;\n  }\n};\n\nRequest.prototype.getQueryParameterString = function() {\n  var queryParameters = this.getQueryParameters();\n  if (queryParameters) {\n    return (\n      '?' +\n      Object.keys(queryParameters)\n        .filter(function(key) {\n          return queryParameters[key] !== undefined;\n        })\n        .map(function(key) {\n          return key + '=' + queryParameters[key];\n        })\n        .join('&')\n    );\n  }\n};\n\nRequest.prototype.execute = function(method, callback) {\n  if (callback) {\n    method(this, callback);\n    return;\n  }\n  var _self = this;\n\n  return new Promise(function(resolve, reject) {\n    method(_self, function(error, result) {\n      if (error) {\n        reject(error);\n      } else {\n        resolve(result);\n      }\n    });\n  });\n};\n\nvar Builder = function() {};\n\nBuilder.prototype._setter = function(key) {\n  return function(value) {\n    this[key] = value;\n    return this;\n  };\n};\n\nBuilder.prototype.withHost = Builder.prototype._setter('host');\n\nBuilder.prototype.withPort = Builder.prototype._setter('port');\n\nBuilder.prototype.withScheme = Builder.prototype._setter('scheme');\n\nBuilder.prototype.withPath = Builder.prototype._setter('path');\n\nBuilder.prototype._assigner = function(key) {\n  return function() {\n    for (var i = 0; i < arguments.length; i++) {\n      this[key] = this._assign(this[key], arguments[i]);\n    }\n    \n    return this;\n  };\n};\n\nBuilder.prototype.withQueryParameters = Builder.prototype._assigner(\n  'queryParameters'\n);\n\nBuilder.prototype.withBodyParameters = Builder.prototype._assigner(\n  'bodyParameters'\n);\n\nBuilder.prototype.withHeaders = Builder.prototype._assigner('headers');\n\nBuilder.prototype.withAuth = function(accessToken) {\n  if (accessToken) {\n    this.withHeaders({ Authorization: 'Bearer ' + accessToken });\n  }\n  return this;\n};\n\nBuilder.prototype._assign = function(src, obj) {\n  if (obj && Array.isArray(obj)) {\n    return obj;\n  }\n  if (obj && typeof obj === 'string') {\n    return obj;\n  }\n  if (obj && Object.keys(obj).length > 0) {\n    return Object.assign(src || {}, obj);\n  }\n  return src;\n};\n\nBuilder.prototype.build = function() {\n  return new Request(this);\n};\n\nmodule.exports.builder = function() {\n  return new Builder();\n};\n"]},"metadata":{},"sourceType":"script"}